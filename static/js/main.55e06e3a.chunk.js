(this["webpackJsonpreact-todo-v2"]=this["webpackJsonpreact-todo-v2"]||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(22),o=n.n(a),i=(n(29),n(30),n(20)),s=n(9),l=n(10),u=n(0),d=Object(c.createContext)(),j=function(){return Object(c.useContext)(d)},O=function(e){var t=e.children,n=Object(c.useState)({t_comp:!1}),r=Object(l.a)(n,2),a=r[0],o=r[1],j=Object(c.useState)([]),O=Object(l.a)(j,2),b=O[0],p=O[1],h=Object(c.useRef)(0),f=Object(c.useRef)(),x=function(){return o({t_id:h.current,t_text:"",t_comp:!1})},g=function(){if(null==a.t_text||""===a.t_text)return alert("\ud560 \uc77c\uc744 \uc785\ub825\ud558\uc138\uc694"),void f.current.focus();p([].concat(Object(i.a)(b),[Object(s.a)(Object(s.a)({},a),{},{t_id:h.current})])),h.current++,x()},v=function(e){var t=b.filter((function(t){return t.t_id!=e}));console.table(t),p(t),console.table(b)},m={todo:a,todoList:b,inputId:f,onChange:function(e){var t=e.target.value;o(Object(s.a)(Object(s.a)({},a),{},{t_text:t}))},onClick:function(){g()},onKeyPress:function(e){"Enter"===e.key?g():"Escape"===e.key&&x()},completeToggle:function(e){var t=Number(e.target.dataset.code),n=b.findIndex((function(e){return e.t_id===t})),c=b[n],r=Object(i.a)(b);r[n]=Object(s.a)(Object(s.a)({},c),{},{t_comp:!c.t_comp}),p(r),alert("complete")},onDeleteClick:function(e){var t=e.target.dataset.code;window.confirm("\uc0ad\uc81c\ud560\uae4c\uc694?")&&v(t)}};return Object(u.jsx)(d.Provider,{value:m,children:t})},b=Object(c.createContext)(),p=function(){return Object(c.useContext)(b)},h=function(e){var t=e.children,n=Object(c.useState)({}),r=Object(l.a)(n,2),a={user:r[0],setUser:r[1]};return Object(u.jsx)(b.Provider,{value:a,children:t})},f=(n(32),n(3)),x=n.n(f),g=n(8),v={method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"http://localhost:3000"},credentials:"include"},m=function(){var e=Object(g.a)(x.a.mark((function e(t,n){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.body=JSON.stringify({userid:t,password:n}),e.next=3,fetch("http://localhost:8000/users/login",v);case 3:if(!(null===(c=e.sent)||void 0===c?void 0:c.ok)){e.next=10;break}return e.next=7,c.json();case 7:return e.abrupt("return",e.sent);case 10:return alert("Login Fail"),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/users/logout",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"http://localhost:3000"},credentials:"include"});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(e){var t=e.header,n=e.form,c=e.children,r=p().user;return Object(u.jsx)(O,{children:Object(u.jsx)(h,{children:Object(u.jsx)("div",{className:"todo_main",children:Object(u.jsxs)("main",{className:"todo_main_layout",children:[Object(u.jsxs)("div",{className:"title",children:[t,Object(u.jsx)(T,{children:r.userid})]}),Object(u.jsx)("section",{className:"form_wrapper",children:n}),Object(u.jsx)("section",{className:"list_wrapper",children:c})]})})})})},N=function(){var e=j().todoList,t=e.map((function(e){return Object(u.jsx)(C,{todo:e})}));return Object(u.jsx)("div",{className:"todo_list",children:e.length>0?t:Object(u.jsx)("p",{children:"Noting todo in List!"})})},k=(n(34),function(){var e=j(),t=e.todo,n=e.inputId,c=e.onChange,r=e.onClick,a=e.onKeyPress;return Object(u.jsxs)("div",{className:"todo_input",children:[Object(u.jsx)("input",{name:"t_text",ref:n,value:t.t_text,placeholder:"TODAY TO-DO",onChange:c,onKeyPress:a}),Object(u.jsx)("div",{className:"btn_insert",onClick:r,children:"ENTER"})]})}),C=(n(35),function(e){var t=e.todo,n=t.t_id,c=t.t_text,r=t.t_comp,a=j(),o=a.onDeleteClick,i=a.completeToggle;return Object(u.jsxs)("div",{className:"todo_item",children:[Object(u.jsx)("div",{className:"todo_delete",onClick:o,"data-code":n,children:"\xd7"}),Object(u.jsx)("div",{className:"todo_text ".concat(r&&"checked"),onClick:i,"data-code":n,children:c}),r&&Object(u.jsx)("div",{className:"check_mark",children:"\u2713"})]})}),I=n(16),y=n(2);n(36);function L(){var e=Object(c.useState)({userid:"",password:""}),t=Object(l.a)(e,2),n=t[0],r=t[1],a=p().setUser,o=Object(y.e)(),i=function(e){return r(Object(s.a)(Object(s.a)({},n),{},Object(I.a)({},e.target.name,e.target.value)))},d=function(){var e=Object(g.a)(x.a.mark((function e(t){var c,r,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.userid,r=n.password,e.next=3,m(c,r);case 3:return i=e.sent,e.next=6,a(i);case 6:o.replace("/");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"todo_login",children:[Object(u.jsx)("div",{className:"login_title",children:"Login"}),Object(u.jsxs)("div",{className:"login_wrapper",children:[Object(u.jsx)("input",{name:"userid",onChange:i,placeholder:"ID"}),Object(u.jsx)("input",{type:"password",name:"password",onChange:i,placeholder:"PASSWORD"}),Object(u.jsx)("button",{className:"btn_login",onClick:function(){""===n.userid||""===n.password?alert("\uc544\uc774\ub514\uc640 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694!"):d()},children:"LOGIN"}),Object(u.jsx)(U,{})]})]})}function T(e){var t=e.children,n=Object(y.e)();return Object(u.jsx)("div",{onClick:function(){n.push("/logout")},className:"btn_logout",children:t||"hello"})}var P=function(){var e=Object(y.e)(),t=p(),n=t.user,r=t.setUser,a=Object(c.useCallback)(Object(g.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:return t.next=4,r([]);case 4:e.replace("/login");case 5:case"end":return t.stop()}}),t)}))),[r]);return Object(c.useEffect)(a,[a]),Object(u.jsx)("div",{children:Object(u.jsx)(u.Fragment,{children:!(null===n||void 0===n?void 0:n.userid)&&n.userid})})},S=n(12),A=function(e){var t=e.children;return Object(u.jsx)(S.a,{basename:ProcessingInstruction.env.PUBLIC_URL,children:t})};var E=function(e){var t=e.children,n=p().setUser,r=Object(y.e)(),a=Object(c.useCallback)(Object(g.a)(x.a.mark((function e(){var t,c,a,o,i,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.auth2.init({client_id:"143239812932-pq6856bf5pqql89i17a38vpl11ne8v5p.apps.googleusercontent.com",scope:"profile email"});case 2:return window.gapi||alert("GOOGLE API NOT FOUND"),e.next=5,null===(t=window)||void 0===t||null===(c=t.gapi)||void 0===c?void 0:c.auth2.getAuthInstance();case 5:return(a=e.sent)||r.replace("/login"),e.next=9,a.currentUser.get();case 9:return o=e.sent,e.next=12,o.getBasicProfile();case 12:return(i=e.sent)||r.replace("/login"),s={email:i.getEmail(),id:i.getId(),name:i.getName(),image:i.getImageUrl(),Token:o.getAuthResponse().id_token},e.next=17,n(s);case 17:case"end":return e.stop()}}),e)}))),[r,n]);return Object(c.useEffect)(a,[a]),Object(u.jsx)(u.Fragment,{children:t})};n(42);var U=function(){var e=Object(c.useRef)(),t=p().setUser,n=Object(y.e)(),r=function(e){var c=e.getBasicProfile(),r=c.getEmail();c.getId(),c.getName(),c.getImageUrl(),e.getAuthResponse().id_token;t({userid:r,login_source:"GOOGLE"}),alert(r+" Hello~"),n.replace("/")};return Object(c.useEffect)((function(){window.gapi?window.gapi.load("auth2",Object(g.a)(x.a.mark((function t(){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.gapi.auth2.init({client_id:"143239812932-pq6856bf5pqql89i17a38vpl11ne8v5p.apps.googleusercontent.com",scope:"profile email"});case 2:return(null===(n=t.sent)||void 0===n?void 0:n.isSignedIn.get())&&console.log("Already Login Now"),t.next=6,n.attachClickHandler(e.current,{},r,(function(e){alert(JSON.stringify(e))}));case 6:case"end":return t.stop()}}),t)})))):alert("GOOGLE API NOT FOUND")}),[]),Object(u.jsxs)("div",{id:"buttonWrapper",children:[Object(u.jsxs)("div",{id:"myGoogleBtn",ref:e,children:[Object(u.jsx)("span",{className:"icon"}),Object(u.jsx)("span",{className:"buttonText",children:"Google Login"})]}),Object(u.jsx)("span",{className:"buttonText",onClick:function(){var e=window.gapi.auth2.getAuthInstance();null===e||void 0===e||e.disconnect(),alert("Logout OK")},children:"Google Logout"})]})};var D=function(){return Object(u.jsx)(h,{children:Object(u.jsxs)(A,{children:[Object(u.jsx)(y.a,{path:"/login",exact:!0,children:Object(u.jsx)(L,{})}),Object(u.jsx)(y.a,{path:"/",exact:!0,children:Object(u.jsx)(E,{children:Object(u.jsx)(_,{header:"TODO LIST",form:Object(u.jsx)(k,{}),children:Object(u.jsx)(N,{})})})}),Object(u.jsx)(y.a,{path:"/logout",exact:!0,children:Object(u.jsx)(P,{})})]})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))};o.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(D,{})}),document.getElementById("root")),G()}},[[43,1,2]]]);
//# sourceMappingURL=main.55e06e3a.chunk.js.map